/*!
 * maptalks.marker.animateto v0.1.0-alpha.1
 * LICENSE : MIT
 * (c) 2016-2021 maptalks.org
 */
/*!
 * requires maptalks@>=0.47.0 
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("maptalks")):"function"==typeof define&&define.amd?define(["maptalks"],n):n(e.maptalks)}(this,function(i){"use strict";var t=i.INTERNAL_LAYER_PREFIX+"_marker_animateto",o={speed:1.2,easing:"inAndOut",showPath:!1,pathSymbol:{lineColor:"#97999b",lineOpacity:.3,lineDasharray:[15,5]}};i.Marker.include({animateTo:function(e,n){var t=this;r(this),n=Object.assign(o,n);var a=s(e,n,this);return a&&(a.on("shapechange",function(){t.setCoordinates(a.getLastCoordinate())}),this._animateToLine=a),this}});var r=function(e){e._animateToLine&&e._animateToLine.remove()},s=function(e,n,t){var a=t.getMap();if(a){t=t.getCoordinates(),t=u(e,t);if(t){a=c(a,n.pathSymbol),t=new i.LineString(t);return t.hide().addTo(a),d(t,n),t}}},d=function(n,e){e.showPath||n.setSymbol({lineOpacity:0});var t=n.getLength(),e=e.duration||t/e.speed*1e3;n.animateShow({duration:e,easing:"inAndOut"},function(e){"finished"===e.state.playState&&n.remove()})},u=function(e,n){return e instanceof i.Coordinate?[n,e]:Array.isArray(e)?e[0]instanceof i.Coordinate?[n].concat(e):"number"==typeof e[0]?[n,new i.Coordinate(e)]:"number"==typeof e[0][0]?(e=e.map(function(e){return new i.Coordinate(e)}),[n].concat(e)):void 0:void 0},c=function(e,n){return e.getLayer(t)||new i.VectorLayer(t,{style:{symbol:n}}).addTo(e)};"undefined"!=typeof console&&console.log("maptalks.marker.animateto v0.1.0-alpha.1, requires maptalks@>=0.47.0.")});